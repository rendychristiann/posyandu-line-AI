<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stunting Detection</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <h1>Stunting Detection</h1>
    <form id="predictionForm">
      <label for="umur">Umur (bulan):</label>
      <input type="number" id="umur" name="umur" required /><br /><br />

      <label for="jenis_kelamin">Jenis Kelamin:</label>
      <select id="jenis_kelamin" name="jenis_kelamin" required>
        <option value="0">Laki-laki</option>
        <option value="1">Perempuan</option></select
      ><br /><br />

      <label for="tinggi_badan">Tinggi Badan (cm):</label>
      <input
        type="number"
        id="tinggi_badan"
        name="tinggi_badan"
        required
      /><br /><br />

      <button type="submit">Predict</button>
    </form>

    <div id="result"></div>

    <script>
      $(document).ready(function () {
        $("#predictionForm").submit(function (event) {
          event.preventDefault();
          var form = $(this);
          $.ajax({
            type: "POST",
            url: "/predict", // Ganti URL dengan URL Flask Anda
            contentType: "application/json",
            data: JSON.stringify({
              umur: $("#umur").val(),
              jenis_kelamin: $("#jenis_kelamin").val(),
              tinggi_badan: $("#tinggi_badan").val(),
            }),
            success: function (response) {
              var predictionLabel;
              switch (response.prediction) {
                case 0:
                  predictionLabel =
                    "Anak anda stunting berat! Segera perbaiki pola gizi dan periksa ke dokter!";
                  break;
                case 1:
                  predictionLabel =
                    "Anak anda stunting! Segera perbaiki pola gizi!";
                  break;
                case 2:
                  predictionLabel =
                    "Tinggi anak anda normal. Perbanyak asupan nutrisi dan vitamin!";
                  break;
                case 3:
                  predictionLabel =
                    "Selamat, anak anda termasuk kategori tinggi. Pertahankan asupan nutrisi dan vitamin!";
                  break;
                default:
                  predictionLabel = "Output unknown";
              }
              $("#result").text("Prediction: " + predictionLabel);
            },
            error: function (xhr, status, error) {
              console.error("Error:", error);
            },
          });
        });
      });
    </script>
  </body>
</html>
